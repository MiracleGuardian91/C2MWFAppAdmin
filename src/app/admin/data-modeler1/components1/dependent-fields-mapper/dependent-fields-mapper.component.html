<ng-container *ngIf="parentForm">
    <div class="col-lg-12" [ngStyle]="{ 'transform': 'translateY(-15px)' }">
        <button type="button" class="btn btn-outline-primary" [ngStyle]="{ 'float': 'right', 'margin-bottom': '10px' }"
            [disabled]="!shouldAllowCallAPI()" (click)="getColumnsNames()">Call API</button>
        <table class="table">
            <thead class="thead-light">
                <tr>
                    <th class="actions-cell">Actions</th>
                    <th>Column Name</th>
                    <th>DMO Name</th>
                </tr>
            </thead>

            <tbody>
                <tr *ngFor="let row of mappingDmos; let i = index">
                    <td class="actions">
                        <ng-container *ngIf="!row.isEditing; else editMode">
                            <a (click)="editRow(row)"><i class="fas fa-edit ml-1" title="Edit" ></i></a>
                            <a (click)="deleteRow(i)"><i class="fas fa-trash-alt ml-3" title="Delete"></i></a>
                        </ng-container>
                        <ng-template #editMode>
                            <a (click)="saveRow(row)"><i class="fas fa-save ml-1" title="Edit"></i></a>
                            <a (click)="cancelEdit(row)"><i class="fas fa-times ml-3" title="Delete"></i></a>
                        </ng-template>
                    </td>
                    <td>
                        <ng-container *ngIf="row.isEditing; else objectKeyView">
                            <ng-select [items]="columnNames" [(ngModel)]="row.objectKey" [readonly]="!row.isEditing"
                                [searchable]="true" placeholder="Select...">
                            </ng-select>
                        </ng-container>

                        <ng-template #objectKeyView>
                            <span>{{ row.objectKey }}</span>
                        </ng-template>
                    </td>

                    <td>
                        <ng-container *ngIf="row.isEditing; else mapDmoNameView">
                            <ng-select [items]="avaliableDMOs" [bindLabel]="'DISPNAME'" [bindValue]="'NAM'"
                                [(ngModel)]="row.mapDmoName" [readonly]="!row.isEditing" [searchable]="true"
                                placeholder="Select...">
                            </ng-select>
                        </ng-container>

                        <ng-template #mapDmoNameView>
                            <span>{{ getDmoDisplayName(row.mapDmoName)}}</span>
                        </ng-template>
                    </td>

                </tr>


                <tr class="add_new">
                    <td class="actions d-flex justify-content-end align-items-center">
                        <a (click)="addRow()"><i class="fas fa-plus ml-2" title="Add"
                            [ngStyle]="{ 'font-size': '10px' }"></i></a>
                    </td>
                    <td>
                        <ng-select [items]="columnNames" [(ngModel)]="newRow.objectKey" [searchable]="true"
                            placeholder="Select...">
                        </ng-select>
                    </td>
                    <td>
                        <ng-select [items]="avaliableDMOs" [bindLabel]="'DISPNAME'" [bindValue]="'NAM'"
                            [(ngModel)]="newRow.mapDmoName" [searchable]="true" placeholder="Select...">
                        </ng-select>

                    </td>
                </tr>


            </tbody>
        </table>

    </div>
</ng-container>